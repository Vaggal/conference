{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Countdown.vue?2b6e","webpack:///./src/components/VideoPlayer.vue?be30","webpack:///./src/views/Room.vue?6252","webpack:///./src/App.vue?0646","webpack:///./src/App.vue","webpack:///./src/views/Room.vue?31b7","webpack:///./src/components/VideoPlayer.vue?6584","webpack:///src/components/VideoPlayer.vue","webpack:///./src/components/VideoPlayer.vue?c7f6","webpack:///./src/components/VideoPlayer.vue","webpack:///./src/components/PeerThumbnail.vue?86cd","webpack:///src/components/PeerThumbnail.vue","webpack:///./src/components/PeerThumbnail.vue?9c0f","webpack:///./src/components/PeerThumbnail.vue","webpack:///./src/components/SelfThumbnail.vue?9c9d","webpack:///src/components/SelfThumbnail.vue","webpack:///./src/components/SelfThumbnail.vue?6d9a","webpack:///./src/components/SelfThumbnail.vue","webpack:///./src/components/Countdown.vue?a9d7","webpack:///src/components/Countdown.vue","webpack:///./src/components/Countdown.vue?5558","webpack:///./src/components/Countdown.vue","webpack:///./src/components/Chat.vue?4e05","webpack:///src/components/Chat.vue","webpack:///./src/components/Chat.vue?a4d4","webpack:///./src/components/Chat.vue","webpack:///./src/modules/Io.js","webpack:///./src/modules/Config.js","webpack:///./src/modules/Room.js","webpack:///./src/modules/InteractiveVideo.js","webpack:///./src/modules/LocalVideoStream.js","webpack:///./src/components/Overlay.vue?ebc7","webpack:///src/components/Overlay.vue","webpack:///./src/components/Overlay.vue?cdc4","webpack:///./src/components/Overlay.vue","webpack:///src/views/Room.vue","webpack:///./src/views/Room.vue?6536","webpack:///./src/views/Room.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/App.vue?a4b3","webpack:///./src/components/Chat.vue?5ff2","webpack:///./src/components/Overlay.vue?3015","webpack:///./src/components/PeerThumbnail.vue?ea6e","webpack:///./src/components/SelfThumbnail.vue?9f63"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","script","component","staticClass","_v","conversationIsSet","on","$event","conversationTypeSelected","_s","conversation","friendlyType","_e","undefined","countdown","secondsLeft","updateId","directives","rawName","expression","error","domProps","conversationIsLoose","activePeer","id","stream","_l","peer","type","username","active","votes","incrementVotes","self","comments","sendComment","saveUsername","peerIndexId","props","peerIndex","Number","default","peerStream","MediaStream","watch","updated","setVideoStream","mounted","methods","peerVideoElement","srcObject","class","peerActive","votable","votingEnabled","voted","peerUsername","Boolean","peerId","String","peerVotes","$emit","selfActive","selfUsername","selfVotes","minutes","seconds","currentColor","timer","colorCodes","info","color","warning","threshold","Math","round","alert","fullDashArray","immediate","handler","startTimer","stop","start","startValues","precision","target","addEventListener","setRemainingPathColor","timeLeft","calculateTimeFraction","rawTimeFraction","setCircleDasharray","document","_m","comment","userId","selfId","charAt","message","fromNow","composing","Array","textarea","e","ctrlKey","keyCode","preventDefault","setInterval","trim","io","Error","signalingServerUrl","env","process","location","host","currentId","localStream","config","SignalingServerUrl","RTCConfiguration","iceServers","urls","peerConnections","connected","getPeerConnection","createNewPeerConnection","peerConnection","RTCPeerConnection","Config","getTracks","forEach","track","addTrack","onicecandidate","event","socket","emit","by","to","ice","candidate","ontrack","rtcTrackEvent","api","trigger","makeOffer","createOffer","mandatory","offerToReceiveVideo","offerToReceiveAudio","then","sdp","setLocalDescription","console","log","catch","handleSocketMessage","rtcSessionDescription","RTCSessionDescription","setRemoteDescription","createAnswer","rtcIceCandidate","RTCIceCandidate","addIceCandidate","Io","connect","joinRoom","room","initPromise","Promise","resolve","reject","roomid","createRoom","init","getSelfId","setSelfUsername","eventEmitter","EventEmitter","setPrototypeOf","getPrototypeOf","onDragMove","x","parseFloat","getAttribute","y","dx","dy","style","webkitTransform","transform","setAttribute","setup","videoLocalElement","interact","draggable","inertia","restrict","restriction","endOnly","elementRect","top","left","bottom","right","onmove","dragMoveListener","mediaConstraints","audio","video","getUserMediaPromise","navigator","mediaDevices","getUserMedia","mediaStream","onremovetrack","invisible","usernameSaved","getElementById","focus","components","VideoPlayer","PeerThumbnail","SelfThumbnail","Countdown","Chat","Overlay","peers","beforeMount","InteractiveVideo","localVideoElement","isNumeric","test","Room","activePeerExists","keys","getPeerFromId","activatePeer","peerToActivate","clone","enabled","deactivatePeer","peerToDeactivate","setupSocketCommunication","LocalVideoStream","peerMediaStream","existingPeer","Vue","use","Router","base","routes","path","library","add","faUser","faUserAlt","faEllipsisV","faLocationArrow","faPaperclip","FontAwesomeIcon","productionTip","router","render","h","App","$mount"],"mappings":"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","file":"js/app.88ead96a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Countdown.vue?vue&type=style&index=0&id=c49723ea&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=style&index=0&id=5b4b6714&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3c1851ea&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home container-fluid\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-sm-2\",attrs:{\"id\":\"typeArea\"}},[_c('form',[_c('div',{staticClass:\"form-group align-items-center text-center\"},[_c('label',{attrs:{\"for\":\"conversationType\"}},[_vm._v(\"Conversation Type\")]),_c('select',{staticClass:\"custom-select mr-sm-2\",attrs:{\"id\":\"conversationType\",\"disabled\":_vm.conversationIsSet()},on:{\"change\":function($event){return _vm.conversationTypeSelected($event)}}},[_c('option',{attrs:{\"selected\":\"\"}},[_vm._v(\"Choose...\")]),_c('option',{attrs:{\"value\":\"byturn\"}},[_vm._v(\"By Turn\")]),_c('option',{attrs:{\"value\":\"loose\"}},[_vm._v(\"Loose\")])])])]),(_vm.conversationIsSet())?_c('div',{staticClass:\"text-center\"},[_vm._v(\" Conversation is set to: \"),_c('br'),_c('strong',[_vm._v(_vm._s(_vm.conversation.friendlyType))])]):_vm._e(),(_vm.countdown.secondsLeft !== undefined)?_c('Countdown',{attrs:{\"seconds-left\":_vm.countdown.secondsLeft,\"update-id\":_vm.countdown.updateId}}):_vm._e()],1),_c('div',{staticClass:\"col-xs col-sm-7\",attrs:{\"id\":\"mainArea\"}},[_c('div',{staticClass:\"row\",attrs:{\"id\":\"video-wrapper\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.error),expression:\"error\"}],staticClass:\"alert alert-warning\",attrs:{\"id\":\"errorAlert\"}},[_c('span',[_vm._v(_vm._s(_vm.error))])]),_c('div',{attrs:{\"id\":\"localVideoContainer\"}},[_c('video',{attrs:{\"id\":\"localVideo\",\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}})]),(_vm.conversationIsSet() && !_vm.conversationIsLoose())?_c('div',{staticClass:\"col d-flex\"},[_c('div',{staticClass:\"row flex-grow-1\"},[_c('div',{staticClass:\"col-xs col-sm d-flex justify-content-center\"},[(_vm.activePeerExists)?_c('VideoPlayer',{attrs:{\"peer-index\":_vm.activePeer.id,\"peer-stream\":_vm.activePeer.stream}}):_vm._e()],1)])]):_vm._e(),(_vm.conversationIsSet() && _vm.conversationIsLoose())?_c('div',{staticClass:\"col d-flex\"},[_c('div',{staticClass:\"row flex-grow-1\"},_vm._l((_vm.peers),function(peer,key){return _c('div',{key:key,staticClass:\"col-sm d-flex justify-content-center\"},[_c('VideoPlayer',{attrs:{\"peer-index\":key,\"peer-stream\":peer.stream,\"conversation-type\":_vm.conversation.type}})],1)}),0)]):_vm._e()]),_c('div',{staticClass:\"row mt-1\"},[_c('div',{staticClass:\"col-8 offset-2\"},[_c('div',{staticClass:\"row justify-content-center\"},_vm._l((_vm.peers),function(peer,key){return _c('div',{key:key,staticClass:\"col-auto\"},[_c('PeerThumbnail',{attrs:{\"voting-enabled\":_vm.conversationIsSet() && !_vm.conversationIsLoose(),\"peer-id\":peer.id,\"peer-username\":peer.username,\"peer-active\":peer.active,\"peer-votes\":_vm.votes[peer.id]},on:{\"votes-increment\":function($event){return _vm.incrementVotes($event)}}})],1)}),0)]),_c('div',{staticClass:\"col-2 d-flex justify-content-center\"},[_c('SelfThumbnail',{attrs:{\"voting-enabled\":_vm.conversationIsSet() && !_vm.conversationIsLoose(),\"self-username\":_vm.self.username,\"self-active\":_vm.self.active,\"self-votes\":_vm.votes[_vm.self.id]}})],1)])]),_c('div',{staticClass:\"col-sm-3\"},[_c('Chat',{attrs:{\"comments\":_vm.comments,\"self-id\":_vm.self.id},on:{\"new-comment\":_vm.sendComment}})],1)]),_c('Overlay',{on:{\"save-username\":_vm.saveUsername}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('video',{attrs:{\"id\":_vm.peerIndexId,\"autoplay\":\"\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <video :id=\"peerIndexId\" autoplay></video>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"VideoPlayer\",\r\n  props: {\r\n    peerIndex: {\r\n      type: Number,\r\n      default: 1000,\r\n    },\r\n    peerStream: MediaStream,\r\n  },\r\n  data() {\r\n    return {\r\n      peerIndexId: \"peer\" + this.peerIndex,\r\n    };\r\n  },\r\n  watch: {\r\n    peerIndex: function () {\r\n      // We need this so that it will update peerIndexId and the updated hook triggers\r\n      this.peerIndexId = \"peer\" + this.peerIndex;\r\n    },\r\n  },\r\n  updated() {\r\n    this.setVideoStream();\r\n  },\r\n  mounted() {\r\n    this.setVideoStream();\r\n  },\r\n  methods: {\r\n    setVideoStream() {\r\n      let peerVideoElement = document.getElementById(this.peerIndexId);\r\n      peerVideoElement.srcObject = this.peerStream;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\nvideo {\r\n  width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoPlayer.vue?vue&type=template&id=5b4b6714&scoped=true&\"\nimport script from \"./VideoPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoPlayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoPlayer.vue?vue&type=style&index=0&id=5b4b6714&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b4b6714\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"thumbnail\",class:{ active: _vm.peerActive, votable: _vm.votingEnabled && !_vm.voted },on:{\"click\":_vm.incrementVotes}},[_c('div',[_c('font-awesome-icon',{staticClass:\"peer-icon\",attrs:{\"icon\":\"user\"}}),(_vm.votingEnabled)?_c('span',{staticClass:\"user-badge badge badge-pill badge-info\"},[_vm._v(\" \"+_vm._s(_vm.votes)+\" \")]):_vm._e()],1),_c('div',[_vm._v(_vm._s(_vm.peerUsername))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    class=\"thumbnail\"\r\n    :class=\"{ active: peerActive, votable: votingEnabled && !voted }\"\r\n    @click=\"incrementVotes\"\r\n  >\r\n    <div>\r\n      <font-awesome-icon icon=\"user\" class=\"peer-icon\" />\r\n      <span v-if=\"votingEnabled\" class=\"user-badge badge badge-pill badge-info\">\r\n        {{ votes }}\r\n      </span>\r\n    </div>\r\n    <div>{{ peerUsername }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"PeerThumbnail\",\r\n  props: {\r\n    votingEnabled: Boolean,\r\n    peerId: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    peerUsername: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    peerActive: Boolean,\r\n    peerVotes: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      voted: false,\r\n      votes: this.peerVotes,\r\n    };\r\n  },\r\n  watch: {\r\n    peerVotes: function () {\r\n      if (this.peerVotes == 0) {\r\n        this.voted = false;\r\n      }\r\n      this.votes = this.peerVotes;\r\n    },\r\n  },\r\n  methods: {\r\n    incrementVotes() {\r\n      if (this.votingEnabled && !this.voted) {\r\n        this.voted = true;\r\n        this.votes++;\r\n        this.$emit(\"votes-increment\", this.peerId);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@/assets/variables.scss\";\r\n\r\n.user-badge {\r\n  position: absolute;\r\n  margin-left: -13px;\r\n}\r\n.active {\r\n  color: $petrol-1 !important;\r\n}\r\n.thumbnail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  color: $petrol-6;\r\n}\r\n.votable {\r\n  cursor: pointer;\r\n}\r\n.peer-icon {\r\n  font-size: 2.5em;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeerThumbnail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeerThumbnail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PeerThumbnail.vue?vue&type=template&id=bf760c56&scoped=true&\"\nimport script from \"./PeerThumbnail.vue?vue&type=script&lang=js&\"\nexport * from \"./PeerThumbnail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PeerThumbnail.vue?vue&type=style&index=0&id=bf760c56&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf760c56\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"thumbnail\",class:{ active: _vm.selfActive }},[_c('div',[_c('font-awesome-icon',{staticClass:\"self-icon\",attrs:{\"icon\":\"user-alt\"}}),(_vm.votingEnabled)?_c('span',{staticClass:\"user-badge badge badge-pill badge-info\"},[_vm._v(_vm._s(_vm.votes))]):_vm._e()],1),_c('div',[_vm._v(_vm._s(_vm.selfUsername))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"thumbnail\" :class=\"{ active: selfActive }\">\r\n    <div>\r\n      <font-awesome-icon icon=\"user-alt\" class=\"self-icon\" />\r\n      <span\r\n        v-if=\"votingEnabled\"\r\n        class=\"user-badge badge badge-pill badge-info\"\r\n        >{{ votes }}</span\r\n      >\r\n    </div>\r\n    <div>{{ selfUsername }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// TODO: Why do we need selfVotes property AND votes variable???\r\nexport default {\r\n  name: \"SelfThumbnail\",\r\n  props: {\r\n    votingEnabled: Boolean,\r\n    selfActive: Boolean,\r\n    selfUsername: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    selfVotes: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      votes: this.selfVotes,\r\n    };\r\n  },\r\n  watch: {\r\n    selfVotes: function () {\r\n      this.votes = this.selfVotes;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@/assets/variables.scss\";\r\n\r\n.user-badge {\r\n  position: absolute;\r\n  margin-left: -13px;\r\n}\r\n.active {\r\n  color: $petrol-1 !important;\r\n}\r\n.thumbnail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  color: $petrol-6;\r\n}\r\n.self-icon {\r\n  font-size: 2.5em;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelfThumbnail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelfThumbnail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SelfThumbnail.vue?vue&type=template&id=4798914e&scoped=true&\"\nimport script from \"./SelfThumbnail.vue?vue&type=script&lang=js&\"\nexport * from \"./SelfThumbnail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SelfThumbnail.vue?vue&type=style&index=0&id=4798914e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4798914e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"base-timer\"},[_c('svg',{attrs:{\"viewBox\":\"0 0 100 100\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('g',{staticClass:\"base-timer-circle\"},[_c('circle',{staticClass:\"base-timer-path-elapsed\",attrs:{\"cx\":\"50\",\"cy\":\"50\",\"r\":\"45\"}}),_c('text',{staticClass:\"svg-text\",attrs:{\"x\":\"50%\",\"y\":\"50%\",\"text-anchor\":\"middle\",\"dy\":\".3em\"}},[_vm._v(\" \"+_vm._s(_vm.minutes)+\":\"+_vm._s(_vm.seconds)+\" \")]),_c('path',{staticClass:\"base-timer-path-remaining\",class:_vm.currentColor,attrs:{\"id\":\"base-timer-path-remaining\",\"stroke-dasharray\":\"283\",\"d\":\"M 50, 50\\n            m -45, 0\\n            a 45,45 0 1,0 90,0\\n            a 45,45 0 1,0 -90,0\"}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"base-timer\">\r\n    <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g class=\"base-timer-circle\">\r\n        <circle class=\"base-timer-path-elapsed\" cx=\"50\" cy=\"50\" r=\"45\"></circle>\r\n        <text x=\"50%\" y=\"50%\" text-anchor=\"middle\" dy=\".3em\" class=\"svg-text\">\r\n          {{ minutes }}:{{ seconds }}\r\n        </text>\r\n        <path\r\n          id=\"base-timer-path-remaining\"\r\n          stroke-dasharray=\"283\"\r\n          class=\"base-timer-path-remaining\"\r\n          :class=\"currentColor\"\r\n          d=\"M 50, 50\r\n              m -45, 0\r\n              a 45,45 0 1,0 90,0\r\n              a 45,45 0 1,0 -90,0\"\r\n        ></path>\r\n      </g>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Timer } from \"easytimer.js\";\r\n\r\nexport default {\r\n  name: \"Countdown\",\r\n  props: {\r\n    secondsLeft: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    updateId: {\r\n      type: String,\r\n      default: \"0\",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      timer: new Timer(),\r\n      minutes: 0,\r\n      seconds: 0,\r\n      colorCodes: {\r\n        info: {\r\n          color: \"green\",\r\n        },\r\n        warning: {\r\n          color: \"orange\",\r\n          threshold: Math.round(this.secondsLeft * 0.3),\r\n        },\r\n        alert: {\r\n          color: \"red\",\r\n          threshold: Math.round(this.secondsLeft * 0.1),\r\n        },\r\n      },\r\n      currentColor: \"green\",\r\n      fullDashArray: 283,\r\n    };\r\n  },\r\n  watch: {\r\n    updateId: {\r\n      immediate: true,\r\n      handler: function () {\r\n        this.colorCodes.warning.threshold = Math.round(this.secondsLeft * 0.3);\r\n        this.colorCodes.alert.threshold = Math.round(this.secondsLeft * 0.1);\r\n        this.startTimer();\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    startTimer() {\r\n      this.currentColor = this.colorCodes.info.color;\r\n      // We always need to stop the timer as it will not start again on the next update.\r\n      this.timer.stop();\r\n      this.timer.start({\r\n        startValues: {\r\n          seconds: this.secondsLeft,\r\n        },\r\n        precision: \"seconds\",\r\n        target: 0,\r\n        countdown: true,\r\n      });\r\n      this.timer.addEventListener(\"secondsUpdated\", () => {\r\n        let timeValues = this.timer.getTimeValues();\r\n        this.minutes = timeValues.minutes;\r\n        this.seconds = (\"0\" + timeValues.seconds).slice(-2);\r\n\r\n        let totalTimeValues = this.timer.getTotalTimeValues();\r\n        let timeLeft =\r\n          this.secondsLeft - (this.secondsLeft - totalTimeValues.seconds);\r\n\r\n        this.setCircleDasharray(timeLeft);\r\n        this.setRemainingPathColor(timeLeft);\r\n      });\r\n    },\r\n    setRemainingPathColor(timeLeft) {\r\n      if (timeLeft <= this.colorCodes.alert.threshold) {\r\n        this.currentColor = this.colorCodes.alert.color;\r\n      } else if (timeLeft <= this.colorCodes.warning.threshold) {\r\n        this.currentColor = this.colorCodes.warning.color;\r\n      }\r\n    },\r\n\r\n    calculateTimeFraction(timeLeft) {\r\n      const rawTimeFraction = timeLeft / this.secondsLeft;\r\n      return rawTimeFraction - (1 / this.secondsLeft) * (1 - rawTimeFraction);\r\n    },\r\n\r\n    setCircleDasharray(timeLeft) {\r\n      const circleDasharray = `${(\r\n        this.calculateTimeFraction(timeLeft) * this.fullDashArray\r\n      ).toFixed(0)} 283`;\r\n      document\r\n        .getElementById(\"base-timer-path-remaining\")\r\n        .setAttribute(\"stroke-dasharray\", circleDasharray);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@/assets/variables.scss\";\r\n\r\n.base-timer-circle {\r\n  fill: none;\r\n  stroke: none;\r\n}\r\n\r\n.base-timer-path-elapsed {\r\n  stroke-width: 5px;\r\n  stroke: $petrol-1;\r\n}\r\n\r\n.base-timer-path-remaining {\r\n  stroke-width: 5px;\r\n  stroke-linecap: round;\r\n  transform: rotate(90deg);\r\n  transform-origin: center;\r\n  transition: 1s linear all;\r\n  fill-rule: nonzero;\r\n  stroke: currentColor;\r\n}\r\n\r\n.base-timer-path-remaining.green {\r\n  color: rgb(65, 184, 131);\r\n}\r\n\r\n.base-timer-path-remaining.orange {\r\n  color: $yellow;\r\n}\r\n\r\n.base-timer-path-remaining.red {\r\n  color: red;\r\n}\r\n\r\n.svg-text {\r\n  stroke: $petrol-1;\r\n  fill: $petrol-1;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Countdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Countdown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Countdown.vue?vue&type=template&id=c49723ea&scoped=true&\"\nimport script from \"./Countdown.vue?vue&type=script&lang=js&\"\nexport * from \"./Countdown.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Countdown.vue?vue&type=style&index=0&id=c49723ea&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c49723ea\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chat\"},[_c('div',{staticClass:\"card chat-card\"},[_vm._m(0),_c('div',{staticClass:\"card-body msg_card_body\"},_vm._l((_vm.comments),function(comment,key){return _c('div',{key:key,staticClass:\"d-flex mb-4\",class:[\n          comment.userId == _vm.selfId\n            ? 'justify-content-start flex-row-reverse'\n            : 'justify-content-start flex-row' ]},[_c('div',{staticClass:\"img_cont_msg flex-shrink-0\"},[_c('span',[_vm._v(_vm._s(comment.username.charAt(0)))])]),_c('div',{class:[\n            comment.userId == _vm.selfId ? 'msg_cotainer_send' : 'msg_cotainer' ]},[_c('div',{staticClass:\"msg_username_container\"},[_c('span',{class:[\n                comment.userId == _vm.selfId\n                  ? 'msg_username_send'\n                  : 'msg_username' ]},[_vm._v(_vm._s(comment.username))])]),_c('div',{staticClass:\"msg\"},[_vm._v(\" \"+_vm._s(comment.message)+\" \")]),_c('span',{class:[comment.userId == _vm.selfId ? 'msg_time_send' : 'msg_time']},[_vm._v(_vm._s(comment.fromNow))])])])}),0),_c('div',{staticClass:\"card-footer\"},[_c('div',{staticClass:\"input-group\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],staticClass:\"form-control type_msg\",attrs:{\"placeholder\":\"Write your message...\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\",on:{\"click\":function($event){return _vm.sendComment($event)}}},[_c('span',{staticClass:\"input-group-text send_btn\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"location-arrow\"}})],1)])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-header msg_head\"},[_c('span',[_vm._v(\"Chat with peers\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chat\">\r\n    <div class=\"card chat-card\">\r\n      <div class=\"card-header msg_head\">\r\n        <span>Chat with peers</span>\r\n      </div>\r\n      <div class=\"card-body msg_card_body\">\r\n        <div\r\n          v-for=\"(comment, key) in comments\"\r\n          :key=\"key\"\r\n          class=\"d-flex mb-4\"\r\n          :class=\"[\r\n            comment.userId == selfId\r\n              ? 'justify-content-start flex-row-reverse'\r\n              : 'justify-content-start flex-row',\r\n          ]\"\r\n        >\r\n          <div class=\"img_cont_msg flex-shrink-0\">\r\n            <span>{{ comment.username.charAt(0) }}</span>\r\n          </div>\r\n          <div\r\n            :class=\"[\r\n              comment.userId == selfId ? 'msg_cotainer_send' : 'msg_cotainer',\r\n            ]\"\r\n          >\r\n            <div class=\"msg_username_container\">\r\n              <span\r\n                :class=\"[\r\n                  comment.userId == selfId\r\n                    ? 'msg_username_send'\r\n                    : 'msg_username',\r\n                ]\"\r\n                >{{ comment.username }}</span\r\n              >\r\n            </div>\r\n            <div class=\"msg\">\r\n              {{ comment.message }}\r\n            </div>\r\n            <span\r\n              :class=\"[comment.userId == selfId ? 'msg_time_send' : 'msg_time']\"\r\n              >{{ comment.fromNow }}</span\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"card-footer\">\r\n        <div class=\"input-group\">\r\n          <textarea\r\n            v-model=\"message\"\r\n            class=\"form-control type_msg\"\r\n            placeholder=\"Write your message...\"\r\n          ></textarea>\r\n          <div class=\"input-group-append\" @click=\"sendComment($event)\">\r\n            <span class=\"input-group-text send_btn\">\r\n              <font-awesome-icon icon=\"location-arrow\" />\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport autosize from \"autosize\";\r\nimport fromnow from \"fromnow\";\r\n\r\nexport default {\r\n  name: \"Chat\",\r\n  props: {\r\n    comments: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    selfId: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      message: \"\",\r\n    };\r\n  },\r\n  watch: {},\r\n  updated() {},\r\n  mounted() {\r\n    let textarea = document.querySelector(\"textarea\");\r\n    autosize(textarea);\r\n    textarea.addEventListener(\"keydown\", (e) => {\r\n      if (!e.ctrlKey && e.keyCode === 13) {\r\n        e.preventDefault();\r\n        this.sendComment();\r\n      } else if (e.ctrlKey && e.keyCode === 13) {\r\n        this.message += \"\\n\";\r\n      }\r\n    });\r\n    setInterval(() => {\r\n      this.comments.forEach((comment) => {\r\n        let agoString = fromnow(comment.date) === \"just now\" ? \"\" : \" ago\";\r\n        comment.fromNow = fromnow(comment.date) + agoString;\r\n      });\r\n    }, 1000);\r\n  },\r\n  methods: {\r\n    sendComment() {\r\n      if (this.message.trim().length > 0) {\r\n        this.$emit(\"new-comment\", this.message);\r\n      }\r\n      this.message = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@/assets/variables.scss\";\r\n\r\n.chat {\r\n  height: 100vh;\r\n  margin-top: auto;\r\n  margin-bottom: auto;\r\n}\r\n.chat-card {\r\n  height: 100%;\r\n  background-color: $background-tint-4 !important;\r\n}\r\n.contacts_body {\r\n  padding: 0.75rem 0 !important;\r\n  overflow-y: auto;\r\n  white-space: nowrap;\r\n}\r\n.msg_card_body {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n.card-header {\r\n  font-size: 20px;\r\n  color: $petrol-1;\r\n  // border-radius: 15px 15 px 0 0 !important;\r\n  text-align: center;\r\n  border-bottom: 0 !important;\r\n  background-color: $background-tint-2;\r\n}\r\n.card-footer {\r\n  // border-radius: 0 0 15px 15px !important;\r\n  border-top: 0 !important;\r\n}\r\n.container {\r\n  align-content: center;\r\n}\r\n.type_msg {\r\n  background-color: $background-tint-3 !important;\r\n  border: 0 !important;\r\n  color: $petrol-1;\r\n  overflow-y: auto;\r\n}\r\n.type_msg:focus {\r\n  box-shadow: none !important;\r\n  outline: 0px !important;\r\n}\r\n.send_btn {\r\n  // border-radius: 0 15px 15px 0 !important;\r\n  background-color: $background-tint-3 !important;\r\n  border: 0 !important;\r\n  color: $yellow;\r\n  cursor: pointer;\r\n}\r\n.contacts {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n.contacts li {\r\n  width: 100% !important;\r\n  padding: 5px 10px;\r\n  margin-bottom: 15px !important;\r\n}\r\n.active {\r\n  background-color: $background-tint-3;\r\n}\r\n.user_img {\r\n  height: 70px;\r\n  width: 70px;\r\n  border: 1.5px solid $petrol-1;\r\n}\r\n.user_img_msg {\r\n  height: 40px;\r\n  width: 40px;\r\n  border: 1.5px solid $petrol-1;\r\n}\r\n.img_cont {\r\n  position: relative;\r\n  height: 70px;\r\n  width: 70px;\r\n}\r\n.img_cont_msg {\r\n  height: 40px;\r\n  width: 40px;\r\n  border: 1.5px solid $petrol-1;\r\n  border-radius: 50% !important;\r\n  display: flex;\r\n  align-items: center;\r\n  color: $petrol-1;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  font-size: 1.2em;\r\n  background-color: $petrol-3;\r\n  // margin-right: 2px;\r\n}\r\n.video_cam {\r\n  margin-left: 50px;\r\n  margin-top: 5px;\r\n}\r\n.video_cam span {\r\n  color: $petrol-1;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  margin-right: 20px;\r\n}\r\n.msg_cotainer,\r\n.msg_cotainer_send {\r\n  word-break: break-all;\r\n  margin-top: auto;\r\n  margin-bottom: auto;\r\n  // border-radius: 25px;\r\n  border-radius: 3.5px;\r\n  position: relative;\r\n  white-space: pre-wrap;\r\n}\r\n.msg_cotainer {\r\n  margin-left: 10px;\r\n  background-color: $petrol-4;\r\n}\r\n.msg_cotainer_send {\r\n  margin-right: 10px;\r\n  background-color: $yellow;\r\n}\r\n.msg_username_container {\r\n  position: relative;\r\n}\r\n.msg_username,\r\n.msg_username_send {\r\n  position: absolute;\r\n  left: 14px;\r\n  color: rgba(14, 14, 14, 0.5);\r\n  font-size: 10px;\r\n}\r\n.msg_time_send,\r\n.msg_time {\r\n  position: absolute;\r\n  right: 0;\r\n  color: rgba(255, 255, 255, 0.5);\r\n  font-size: 10px;\r\n  white-space: nowrap;\r\n}\r\n.msg {\r\n  padding: 10px;\r\n  min-width: 65px;\r\n}\r\n.msg_head {\r\n  position: relative;\r\n}\r\n@media (max-width: 576px) {\r\n  .contacts_card {\r\n    margin-bottom: 15px !important;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=624439bf&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=624439bf&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"624439bf\",\n  null\n  \n)\n\nexport default component.exports","import io from \"socket.io-client\";\r\n\r\nif (typeof io === \"undefined\") {\r\n  throw new Error(\"Socket.io required\");\r\n}\r\n\r\nexport default io;\r\n","let env = process.env.NODE_ENV;\r\nlet signalingServerUrl;\r\n\r\nif (env === \"production\") {\r\n  signalingServerUrl = window.location.host;\r\n} else {\r\n  signalingServerUrl = \"localhost:5555\";\r\n}\r\n\r\nlet config = {\r\n  SignalingServerUrl: signalingServerUrl,\r\n  RTCConfiguration: {\r\n    iceServers: [\r\n      {\r\n        urls: \"stun:stun.l.google.com:19302\",\r\n      },\r\n    ],\r\n  },\r\n};\r\n\r\nexport default config;\r\n","/** @module modules/Room */\r\nimport Io from \"@/modules/Io\";\r\nimport Config from \"@/modules/Config\";\r\nimport EventEmitter from \"wolfy87-eventemitter\";\r\n\r\nvar peerConnections = {};\r\nvar currentId;\r\nvar selfUsername;\r\nvar localStream;\r\nvar connected = false;\r\n\r\nfunction getPeerConnection(id) {\r\n  if (peerConnections[id]) {\r\n    return peerConnections[id];\r\n  } else {\r\n    return createNewPeerConnection(id);\r\n  }\r\n}\r\n\r\nfunction createNewPeerConnection(id) {\r\n  var peerConnection = new RTCPeerConnection(Config.RTCConfiguration);\r\n  peerConnections[id] = peerConnection;\r\n\r\n  localStream.getTracks().forEach((track) => {\r\n    peerConnection.addTrack(track, localStream);\r\n  });\r\n\r\n  peerConnection.onicecandidate = function (event) {\r\n    socket.emit(\"msg\", {\r\n      by: currentId,\r\n      username: selfUsername,\r\n      to: id,\r\n      ice: event.candidate,\r\n      type: \"ice\",\r\n    });\r\n  };\r\n\r\n  peerConnection.ontrack = function (rtcTrackEvent) {\r\n    api.trigger(\"peer.track\", [\r\n      {\r\n        id: id,\r\n        track: rtcTrackEvent.track,\r\n      },\r\n    ]);\r\n  };\r\n\r\n  return peerConnection;\r\n}\r\n\r\nfunction makeOffer(id) {\r\n  var peerConnection = getPeerConnection(id);\r\n\r\n  // Native WebRTC method: https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer\r\n  peerConnection\r\n    .createOffer({\r\n      mandatory: {\r\n        offerToReceiveVideo: true,\r\n        offerToReceiveAudio: true,\r\n      },\r\n    })\r\n    .then((sdp) => {\r\n      peerConnection.setLocalDescription(sdp);\r\n      console.log(\"Creating an offer for\", id);\r\n\r\n      socket.emit(\"msg\", {\r\n        by: currentId,\r\n        username: selfUsername,\r\n        to: id,\r\n        sdp: sdp,\r\n        type: \"sdp-offer\",\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"Error making offer: \", error);\r\n    });\r\n}\r\n\r\n/**\r\n * Handles messages related to SDP and ICE\r\n * @param {String} data\r\n */\r\nfunction handleSocketMessage(data) {\r\n  var peerConnection = getPeerConnection(data.by);\r\n  var rtcSessionDescription;\r\n\r\n  switch (data.type) {\r\n    case \"sdp-offer\":\r\n      rtcSessionDescription = new RTCSessionDescription(data.sdp);\r\n\r\n      peerConnection\r\n        .setRemoteDescription(rtcSessionDescription)\r\n        .then(() => {\r\n          console.log(\"Setting remote description by offer\");\r\n\r\n          peerConnection\r\n            .createAnswer()\r\n            .then((sdp) => {\r\n              peerConnection.setLocalDescription(sdp);\r\n\r\n              socket.emit(\"msg\", {\r\n                by: currentId,\r\n                username: selfUsername,\r\n                to: data.by,\r\n                sdp: sdp,\r\n                type: \"sdp-answer\",\r\n              });\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Error creating answer: \", error);\r\n            });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error setting remote description: \", error);\r\n        });\r\n\r\n      api.trigger(\"add.peer\", [\r\n        {\r\n          id: data.by,\r\n          username: data.username,\r\n        },\r\n      ]);\r\n\r\n      break;\r\n    case \"sdp-answer\":\r\n      rtcSessionDescription = new RTCSessionDescription(data.sdp);\r\n\r\n      api.trigger(\"add.peer\", [\r\n        {\r\n          id: data.by,\r\n          username: data.username,\r\n        },\r\n      ]);\r\n\r\n      peerConnection\r\n        .setRemoteDescription(rtcSessionDescription)\r\n        .then(() => {\r\n          console.log(\"Set the remote description by answer\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error setting remote description: \", error);\r\n        });\r\n\r\n      break;\r\n    case \"ice\":\r\n      if (data.ice) {\r\n        console.log(\"Adding ice candidates\");\r\n\r\n        let rtcIceCandidate = new RTCIceCandidate(data.ice);\r\n        peerConnection.addIceCandidate(rtcIceCandidate);\r\n      }\r\n      break;\r\n  }\r\n}\r\n\r\nvar socket = Io.connect(Config.SignalingServerUrl);\r\n\r\nsocket.on(\"peer.connected\", function (peer) {\r\n  console.log(\"peer.connected: \", peer);\r\n  makeOffer(peer.id);\r\n});\r\n\r\nsocket.on(\"peer.disconnected\", function (peer) {\r\n  api.trigger(\"peer.disconnected\", [peer]);\r\n});\r\n\r\nsocket.on(\"msg\", function (data) {\r\n  handleSocketMessage(data);\r\n});\r\nsocket.on(\"comment\", function (comment) {\r\n  api.trigger(\"comment\", [comment]);\r\n});\r\n\r\nsocket.on(\"votes.update\", function (votes) {\r\n  api.trigger(\"votes.update\", [votes]);\r\n});\r\n\r\nsocket.on(\"conversation.type.set\", function (conversation) {\r\n  api.trigger(\"conversation.type.set\", [conversation]);\r\n});\r\n\r\nsocket.on(\"active.peer\", function (peerId) {\r\n  api.trigger(\"active.peer\", [peerId]);\r\n});\r\n\r\nsocket.on(\"time.left\", function (secondsLeft) {\r\n  api.trigger(\"time.left\", [secondsLeft]);\r\n});\r\n\r\n/*\r\n  The api variable is a way for Room.vue and Room.js to communicate.\r\n  Room.js is the only place that we have access to the socket.\r\n  In this way when we need to make a change in the view based on an event from a socket we can trigger in Room.js an event\r\n  that Room.vue will listen to and apply the change to the view\r\n*/\r\nvar api = {\r\n  joinRoom: function (room) {\r\n    let initPromise = new Promise((resolve, reject) => {\r\n      if (!connected) {\r\n        socket.emit(\r\n          \"init\",\r\n          {\r\n            room: room,\r\n          },\r\n          function (roomid, id) {\r\n            resolve();\r\n            currentId = id;\r\n          }\r\n        );\r\n        connected = true;\r\n      } else {\r\n        reject();\r\n      }\r\n    });\r\n\r\n    return initPromise;\r\n  },\r\n  createRoom: function () {\r\n    let initPromise = new Promise((resolve) => {\r\n      socket.emit(\"init\", null, function (roomid, id, conversation) {\r\n        api.trigger(\"conversation.type.set\", [conversation]);\r\n        resolve(roomid);\r\n        currentId = id;\r\n        connected = true;\r\n      });\r\n    });\r\n\r\n    return initPromise;\r\n  },\r\n  init: function (stream) {\r\n    localStream = stream;\r\n  },\r\n  getSelfId: function () {\r\n    return currentId;\r\n  },\r\n  setSelfUsername: function (username) {\r\n    selfUsername = username;\r\n  },\r\n};\r\n\r\nvar eventEmitter = new EventEmitter();\r\nObject.setPrototypeOf(api, Object.getPrototypeOf(eventEmitter));\r\n\r\napi.on(\"votes.increment\", function (peerId) {\r\n  socket.emit(\"votes.increment\", {\r\n    id: peerId,\r\n  });\r\n});\r\n\r\napi.on(\"conversation.type.selected\", function (id, type) {\r\n  socket.emit(\"conversation.type.selected\", {\r\n    by: id,\r\n    conversation: {\r\n      type: type,\r\n    },\r\n  });\r\n});\r\napi.on(\"new-comment\", function (message, id, username) {\r\n  socket.emit(\"new-comment\", {\r\n    message: message,\r\n    id: id,\r\n    username: username,\r\n  });\r\n});\r\n\r\nexport default api;\r\n","import interact from \"interactjs\";\r\n\r\nfunction onDragMove(event) {\r\n  var target = event.target;\r\n  var x = parseFloat(target.getAttribute(\"data-x\")) || 0;\r\n  var y = parseFloat(target.getAttribute(\"data-y\")) || 0;\r\n\r\n  x += event.dx;\r\n  y += event.dy;\r\n\r\n  event.target.style.webkitTransform = event.target.style.transform =\r\n    \"translate(\" + x + \"px, \" + y + \"px)\";\r\n\r\n  // update the posiion attributes\r\n  target.setAttribute(\"data-x\", x);\r\n  target.setAttribute(\"data-y\", y);\r\n}\r\n\r\n// function onResizeMove(event) {\r\n//   var target = event.target;\r\n//   var x = parseFloat(target.getAttribute(\"data-x\")) || 0;\r\n//   var y = parseFloat(target.getAttribute(\"data-y\")) || 0;\r\n\r\n//   // update the element's style\r\n//   target.style.width = event.rect.width + \"px\";\r\n//   target.style.height = event.rect.height + \"px\";\r\n\r\n//   // translate when resizing from top or left edges\r\n//   x += event.deltaRect.left;\r\n//   y += event.deltaRect.top;\r\n//   target.style.webkitTransform = target.style.transform =\r\n//     \"translate(\" + x + \"px,\" + y + \"px)\";\r\n\r\n//   target.setAttribute(\"data-x\", x);\r\n//   target.setAttribute(\"data-y\", y);\r\n// }\r\n\r\nlet setup = function (videoLocalElement) {\r\n  interact(videoLocalElement)\r\n    .draggable({\r\n      inertia: true,\r\n      restrict: {\r\n        restriction: \"parent\",\r\n        endOnly: true,\r\n        elementRect: {\r\n          top: 0,\r\n          left: 0,\r\n          bottom: 1,\r\n          right: 1,\r\n        },\r\n      },\r\n      onmove: window.dragMoveListener,\r\n    })\r\n    // .resizable({\r\n    //   preserveAspectRatio: true,\r\n    //   inertia: true,\r\n    //   edges: {\r\n    //     left: true,\r\n    //     right: true,\r\n    //     bottom: true,\r\n    //     top: true,\r\n    //   },\r\n    //   restrictEdges: {\r\n    //     outer: \"parent\",\r\n    //     endOnly: true,\r\n    //   },\r\n    //   restrictSize: {\r\n    //     min: {\r\n    //       width: 50,\r\n    //       height: 50,\r\n    //     },\r\n    //   },\r\n    // })\r\n    .on(\"dragmove\", onDragMove);\r\n  // .on(\"resizemove\", onResizeMove);\r\n};\r\n\r\nexport default {\r\n  setup: setup,\r\n};\r\n","var stream;\r\n\r\nvar mediaConstraints = {\r\n  audio: true,\r\n  video: true,\r\n};\r\n\r\nlet get = function () {\r\n  let getUserMediaPromise = new Promise((resolve, reject) => {\r\n    // The if clause should be useful but I have not figured out yet for what :P\r\n    if (stream) {\r\n      resolve(stream);\r\n    } else {\r\n      navigator.mediaDevices\r\n        .getUserMedia(mediaConstraints)\r\n        .then((mediaStream) => {\r\n          mediaStream.onremovetrack = (event) => {\r\n            console.log(\"Removed track: \", event);\r\n          };\r\n          stream = mediaStream;\r\n          resolve(stream);\r\n        })\r\n        .catch((error) => {\r\n          reject(error);\r\n        });\r\n    }\r\n  });\r\n\r\n  return getUserMediaPromise;\r\n};\r\n\r\nexport default {\r\n  get: get,\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlay\",class:{ invisible: _vm.usernameSaved }},[_c('div',{staticClass:\"centering-wrapper\"},[_vm._m(0),_c('div',{staticClass:\"form-container\"},[_c('div',{staticClass:\"note mb-2\"},[_vm._v(\" Please set a username before entering the chat \")]),_c('form',{staticClass:\"form-inline\",attrs:{\"id\":\"username-form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.saveUsername()}}},[_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],staticClass:\"form-control\",attrs:{\"id\":\"username-input\",\"type\":\"text\",\"aria-describedby\":\"username\",\"placeholder\":\"Enter username\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})]),_c('button',{staticClass:\"btn btn-primary ml-1\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.saveUsername()}}},[_vm._v(\" Save \")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header-container\"},[_c('h1',{staticClass:\"header\"},[_vm._v(\"THESIS CHAT\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"overlay\" :class=\"{ invisible: usernameSaved }\">\r\n    <div class=\"centering-wrapper\">\r\n      <div class=\"header-container\">\r\n        <h1 class=\"header\">THESIS CHAT</h1>\r\n      </div>\r\n      <div class=\"form-container\">\r\n        <div class=\"note mb-2\">\r\n          Please set a username before entering the chat\r\n        </div>\r\n        <form\r\n          id=\"username-form\"\r\n          class=\"form-inline\"\r\n          @submit.prevent=\"saveUsername()\"\r\n        >\r\n          <div class=\"form-group\">\r\n            <input\r\n              id=\"username-input\"\r\n              v-model=\"username\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              aria-describedby=\"username\"\r\n              placeholder=\"Enter username\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary ml-1\"\r\n            @click=\"saveUsername()\"\r\n          >\r\n            Save\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Overlay\",\r\n  data() {\r\n    return {\r\n      usernameSaved: false,\r\n      username: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    document.getElementById(\"username-input\").focus();\r\n  },\r\n  methods: {\r\n    saveUsername() {\r\n      this.usernameSaved = true;\r\n      this.$emit(\"save-username\", this.username);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"@/assets/variables.scss\";\r\n\r\n.overlay {\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: black;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1;\r\n}\r\n.centering-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n}\r\n.header-container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.form-container {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.header {\r\n  font-family: \"Montserrat\", Arial, sans-serif;\r\n  font-weight: 700;\r\n  letter-spacing: 0.02em;\r\n  text-shadow: 0 0 0.15em $yellow;\r\n  user-select: none;\r\n  white-space: nowrap;\r\n}\r\n#username-form {\r\n  justify-content: center;\r\n}\r\n.note {\r\n  color: $petrol-1;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Overlay.vue?vue&type=template&id=2b918e76&\"\nimport script from \"./Overlay.vue?vue&type=script&lang=js&\"\nexport * from \"./Overlay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Overlay.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"home container-fluid\">\r\n    <div class=\"row\">\r\n      <div id=\"typeArea\" class=\"col-sm-2\">\r\n        <form>\r\n          <div class=\"form-group align-items-center text-center\">\r\n            <label for=\"conversationType\">Conversation Type</label>\r\n            <select\r\n              id=\"conversationType\"\r\n              class=\"custom-select mr-sm-2\"\r\n              :disabled=\"conversationIsSet()\"\r\n              @change=\"conversationTypeSelected($event)\"\r\n            >\r\n              <option selected>Choose...</option>\r\n              <option value=\"byturn\">By Turn</option>\r\n              <option value=\"loose\">Loose</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n        <div v-if=\"conversationIsSet()\" class=\"text-center\">\r\n          Conversation is set to:\r\n          <br />\r\n          <strong>{{ conversation.friendlyType }}</strong>\r\n        </div>\r\n        <Countdown\r\n          v-if=\"countdown.secondsLeft !== undefined\"\r\n          :seconds-left=\"countdown.secondsLeft\"\r\n          :update-id=\"countdown.updateId\"\r\n        ></Countdown>\r\n      </div>\r\n      <div id=\"mainArea\" class=\"col-xs col-sm-7\">\r\n        <div id=\"video-wrapper\" class=\"row\">\r\n          <div v-show=\"error\" id=\"errorAlert\" class=\"alert alert-warning\">\r\n            <span>{{ error }}</span>\r\n          </div>\r\n          <div id=\"localVideoContainer\">\r\n            <video id=\"localVideo\" autoplay muted></video>\r\n          </div>\r\n          <div\r\n            v-if=\"conversationIsSet() && !conversationIsLoose()\"\r\n            class=\"col d-flex\"\r\n          >\r\n            <div class=\"row flex-grow-1\">\r\n              <div class=\"col-xs col-sm d-flex justify-content-center\">\r\n                <VideoPlayer\r\n                  v-if=\"activePeerExists\"\r\n                  :peer-index=\"activePeer.id\"\r\n                  :peer-stream=\"activePeer.stream\"\r\n                ></VideoPlayer>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- this will be used when we will want to display more than one peers at the same time -->\r\n          <div\r\n            v-if=\"conversationIsSet() && conversationIsLoose()\"\r\n            class=\"col d-flex\"\r\n          >\r\n            <div class=\"row flex-grow-1\">\r\n              <div\r\n                v-for=\"(peer, key) in peers\"\r\n                :key=\"key\"\r\n                class=\"col-sm d-flex justify-content-center\"\r\n              >\r\n                <VideoPlayer\r\n                  :peer-index=\"key\"\r\n                  :peer-stream=\"peer.stream\"\r\n                  :conversation-type=\"conversation.type\"\r\n                ></VideoPlayer>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-1\">\r\n          <div class=\"col-8 offset-2\">\r\n            <div class=\"row justify-content-center\">\r\n              <div v-for=\"(peer, key) in peers\" :key=\"key\" class=\"col-auto\">\r\n                <PeerThumbnail\r\n                  :voting-enabled=\"\r\n                    conversationIsSet() && !conversationIsLoose()\r\n                  \"\r\n                  :peer-id=\"peer.id\"\r\n                  :peer-username=\"peer.username\"\r\n                  :peer-active=\"peer.active\"\r\n                  :peer-votes=\"votes[peer.id]\"\r\n                  @votes-increment=\"incrementVotes($event)\"\r\n                ></PeerThumbnail>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2 d-flex justify-content-center\">\r\n            <SelfThumbnail\r\n              :voting-enabled=\"conversationIsSet() && !conversationIsLoose()\"\r\n              :self-username=\"self.username\"\r\n              :self-active=\"self.active\"\r\n              :self-votes=\"votes[self.id]\"\r\n            ></SelfThumbnail>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-3\">\r\n        <Chat\r\n          :comments=\"comments\"\r\n          :self-id=\"self.id\"\r\n          @new-comment=\"sendComment\"\r\n        ></Chat>\r\n      </div>\r\n    </div>\r\n    <Overlay @save-username=\"saveUsername\"> </Overlay>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VideoPlayer from \"@/components/VideoPlayer.vue\";\r\nimport PeerThumbnail from \"@/components/PeerThumbnail.vue\";\r\nimport SelfThumbnail from \"@/components/SelfThumbnail.vue\";\r\nimport Countdown from \"@/components/Countdown.vue\";\r\nimport Chat from \"@/components/Chat.vue\";\r\n\r\n// import $ from 'jquery';\r\nimport \"bootstrap\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport Room from \"@/modules/Room\";\r\nimport InteractiveVideo from \"@/modules/InteractiveVideo\";\r\nimport LocalVideoStream from \"@/modules/LocalVideoStream\";\r\nimport Overlay from \"../components/Overlay.vue\";\r\n\r\nexport default {\r\n  name: \"Room\",\r\n  components: {\r\n    VideoPlayer,\r\n    PeerThumbnail,\r\n    SelfThumbnail,\r\n    Countdown,\r\n    Chat,\r\n    Overlay,\r\n  },\r\n  data() {\r\n    return {\r\n      error: \"\",\r\n      self: {\r\n        username: \"\",\r\n        id: undefined,\r\n        stream: undefined,\r\n        active: false,\r\n      },\r\n      peers: [],\r\n      activePeer: {},\r\n      votes: {},\r\n      conversation: {\r\n        type: \"\",\r\n      },\r\n      countdown: {\r\n        secondsLeft: undefined,\r\n        updateId: undefined,\r\n      },\r\n      comments: [],\r\n    };\r\n  },\r\n  beforeMount() {},\r\n  mounted() {\r\n    document.getElementById(\"username-input\").focus();\r\n    let localVideoElement = document.getElementById(\"localVideo\");\r\n    InteractiveVideo.setup(localVideoElement);\r\n  },\r\n  methods: {\r\n    isNumeric(value) {\r\n      return /^\\d+$/.test(value);\r\n    },\r\n    incrementVotes(peerId) {\r\n      Room.trigger(\"votes.increment\", [peerId]);\r\n    },\r\n    activePeerExists() {\r\n      return Object.keys(this.activePeer).length > 0;\r\n    },\r\n    conversationIsSet() {\r\n      return this.conversation.type !== \"\";\r\n    },\r\n    conversationIsLoose() {\r\n      return this.conversation.type === \"loose\";\r\n    },\r\n    getPeerFromId(peerId) {\r\n      if (this.self.id == peerId) {\r\n        return this.self;\r\n      }\r\n\r\n      for (const existingPeer of this.peers) {\r\n        if (existingPeer.id == peerId) {\r\n          return existingPeer;\r\n        }\r\n      }\r\n    },\r\n    conversationTypeSelected(event) {\r\n      if (event.target.value === \"byturn\" || event.target.value === \"loose\") {\r\n        Room.trigger(\"conversation.type.selected\", [\r\n          this.self.id,\r\n          event.target.value,\r\n        ]);\r\n      }\r\n    },\r\n    activatePeer(peerToActivate) {\r\n      this.activePeer.id = peerToActivate.id;\r\n      this.activePeer.username = peerToActivate.username;\r\n      this.activePeer.stream = peerToActivate.stream.clone();\r\n      this.activePeer.stream.getTracks().forEach((track) => {\r\n        track.enabled = true;\r\n      });\r\n      this.activePeer.active = true;\r\n      peerToActivate.active = true;\r\n      if (peerToActivate.id == this.self.id) {\r\n        this.self.active = true;\r\n      }\r\n    },\r\n    deactivatePeer() {\r\n      this.activePeer.active == false;\r\n      this.activePeer.stream.getTracks().forEach((track) => {\r\n        track.enabled = false;\r\n      });\r\n\r\n      let peerToDeactivate = this.getPeerFromId(this.activePeer.id);\r\n      peerToDeactivate.active = false;\r\n\r\n      // If the active peer is the client then we should not disable the tracks because the self video will stop\r\n      if (peerToDeactivate.id != this.self.id) {\r\n        peerToDeactivate.stream.getTracks().forEach((track) => {\r\n          track.enabled = false;\r\n        });\r\n      }\r\n    },\r\n    sendComment(message) {\r\n      Room.trigger(\"new-comment\", [message, this.self.id, this.self.username]);\r\n    },\r\n    saveUsername(username) {\r\n      this.self.username = username;\r\n      Room.setSelfUsername(this.self.username);\r\n      this.setupSocketCommunication();\r\n    },\r\n    setupSocketCommunication() {\r\n      if (!window.RTCPeerConnection || !navigator.getUserMedia) {\r\n        this.error =\r\n          \"WebRTC is not supported by your browser. You can try the app with Chrome and Firefox.\";\r\n        return;\r\n      }\r\n\r\n      LocalVideoStream.get()\r\n        .then((stream) => {\r\n          this.self.stream = stream;\r\n          Room.init(this.self.stream);\r\n\r\n          if (!this.$route.params.roomId) {\r\n            Room.createRoom()\r\n              .then((roomId) => {\r\n                this.self.id = Room.getSelfId();\r\n                this.$router.push({\r\n                  name: \"active-room\",\r\n                  params: { roomId: roomId },\r\n                });\r\n              })\r\n              .catch((error) => {\r\n                console.log(\"Error creating room: \", error);\r\n              });\r\n          } else {\r\n            Room.joinRoom(this.$route.params.roomId)\r\n              .then(() => {\r\n                this.self.id = Room.getSelfId();\r\n              })\r\n              .catch((error) => {\r\n                console.log(\"Error joining room: \", error);\r\n              });\r\n          }\r\n\r\n          let localVideo = document.getElementById(\"localVideo\");\r\n          localVideo.srcObject = this.self.stream;\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Error getting local video stream: \", error);\r\n          this.error =\r\n            \"No audio/video permissions. Please refresh your browser and allow the audio/video capturing.\";\r\n        });\r\n\r\n      Room.on(\"add.peer\", (peer) => {\r\n        let peerMediaStream = new MediaStream();\r\n\r\n        this.peers.push({\r\n          id: peer.id,\r\n          username: peer.username,\r\n          stream: peerMediaStream,\r\n          active: false,\r\n        });\r\n      });\r\n\r\n      Room.on(\"peer.track\", (peer) => {\r\n        this.peers.forEach((existingPeer) => {\r\n          // Peer already exists so we just add the track to their MediaStream object\r\n          if (existingPeer.id === peer.id) {\r\n            console.log(\"Adding new track for client\");\r\n            peer.track.enabled = false; // We need the stream to be disabled by default\r\n            existingPeer.stream.addTrack(peer.track);\r\n          }\r\n        });\r\n      });\r\n\r\n      Room.on(\"peer.disconnected\", (peer) => {\r\n        console.log(\"Client disconnected, removing stream\");\r\n        this.peers = this.peers.filter((p) => {\r\n          return p.id !== peer.id;\r\n        });\r\n      });\r\n\r\n      Room.on(\"comment\", (comment) => {\r\n        comment.fromNow = \"just now\";\r\n        this.comments.push(comment);\r\n      });\r\n\r\n      Room.on(\"votes.update\", (votes) => {\r\n        this.votes = votes;\r\n      });\r\n\r\n      Room.on(\"conversation.type.set\", (conversation) => {\r\n        if (conversation.type === \"loose\") {\r\n          this.peers.forEach((peer) => {\r\n            peer.active = true;\r\n            peer.stream.getTracks().forEach((track) => {\r\n              track.enabled = true;\r\n            });\r\n          });\r\n          this.conversation = conversation;\r\n          this.conversation.friendlyType = \"Loose\";\r\n        } else if (conversation.type === \"byturn\") {\r\n          this.conversation = conversation;\r\n          this.conversation.friendlyType = \"By Turn\";\r\n        }\r\n      });\r\n\r\n      Room.on(\"time.left\", (secondsLeft) => {\r\n        this.countdown.secondsLeft = secondsLeft;\r\n        this.countdown.updateId = uuidv4();\r\n      });\r\n\r\n      Room.on(\"active.peer\", (peerId) => {\r\n        if (peerId != this.activePeer.id) {\r\n          if (this.activePeerExists()) {\r\n            this.deactivatePeer();\r\n          }\r\n\r\n          let peerToActivate = this.getPeerFromId(peerId);\r\n          this.activatePeer(peerToActivate);\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"@/assets/variables.scss\";\r\n\r\n.home {\r\n  height: 100%;\r\n  background: $petrol-5;\r\n  color: $petrol-1;\r\n}\r\n#mainArea {\r\n  height: 100vh;\r\n  padding-bottom: 4px;\r\n}\r\n#video-wrapper {\r\n  position: relative;\r\n  background: $background-tint-4;\r\n  height: 90%;\r\n}\r\n#localVideoContainer {\r\n  position: absolute;\r\n  z-index: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n#localVideo {\r\n  width: 160px;\r\n  height: 120px;\r\n  margin-left: 0.8%;\r\n  margin-top: 0.8%;\r\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.75);\r\n  touch-action: none;\r\n}\r\n#errorAlert {\r\n  position: absolute;\r\n  right: 0;\r\n  z-index: 5;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Room.vue?vue&type=template&id=587ea896&\"\nimport script from \"./Room.vue?vue&type=script&lang=js&\"\nexport * from \"./Room.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Room.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\r\nimport Router from \"vue-router\";\r\nimport Room from \"@/views/Room.vue\";\r\n\r\nVue.use(Router);\r\n\r\nexport default new Router({\r\n  mode: \"history\",\r\n  base: process.env.BASE_URL,\r\n  routes: [\r\n    {\r\n      path: \"/room/:roomId\",\r\n      name: \"active-room\",\r\n      component: Room,\r\n    },\r\n    {\r\n      path: \"/room\",\r\n      name: \"room\",\r\n      component: Room,\r\n    },\r\n    {\r\n      path: \"*\",\r\n      name: \"default-room\",\r\n      component: Room,\r\n    },\r\n  ],\r\n});\r\n","import Vue from \"vue\";\r\nimport App from \"@/App.vue\";\r\nimport router from \"@/router\";\r\n// eslint-disable-next-line no-unused-vars\r\nimport adapter from \"webrtc-adapter\";\r\n\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\r\n\r\nimport {\r\n  faUser,\r\n  faUserAlt,\r\n  faEllipsisV,\r\n  faLocationArrow,\r\n  faPaperclip,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nlibrary.add([faUser, faUserAlt, faEllipsisV, faLocationArrow, faPaperclip]);\r\nVue.component(\"FontAwesomeIcon\", FontAwesomeIcon);\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  router,\r\n  render: (h) => h(App),\r\n}).$mount(\"#app\");\r\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=624439bf&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Overlay.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PeerThumbnail.vue?vue&type=style&index=0&id=bf760c56&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelfThumbnail.vue?vue&type=style&index=0&id=4798914e&scoped=true&lang=scss&\""],"sourceRoot":""}